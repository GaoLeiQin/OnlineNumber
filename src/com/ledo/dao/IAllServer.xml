<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ledo.dao.IAllServer">

	<!--只更新Linux服务器的在线人数信息-->
	<update id="updateOnlineNumbersInfo">
		update all_serverinfo_test4 set onlineNum = #{onlineNum} where zoneId = #{zoneId};
	</update>

	<select id="queryAllServerInfo" resultType="AllServerInfo">
		select channel,zoneId,serverName,optOrId,ip,hostName,onlineNum,openTime,openDays from all_serverinfo_test4;
	</select>

	<select id="queryByCondition" parameterType="AllServerInfo" resultType="AllServerInfo">
		select channel,zoneId,serverName,optOrId,ip,hostName,onlineNum,openTime,openDays from all_serverinfo_test4
		<where>
			<if test = "channel != null and channel != ''">
				channel like  CONCAT('%',#{channel},'%')
			</if>
			<if test = "zoneId != null">
				and zoneId = #{zoneId}
			</if>
			<if test = "serverName != null and serverName != ''">
				and serverName like  CONCAT('%',#{serverName},'%')
			</if>
			<if test = "optOrId != null">
				and optOrId = #{optOrId}
			</if>
			<if test = "ip != null and ip != ''">
				and ip like  CONCAT('%',#{ip},'%')
			</if>
			<if test = "hostName != null and hostName != ''">
				and hostName like  CONCAT('%',#{hostName},'%')
			</if>
			<if test = "onlineNum != null and onlineNum >= 0">
				and <![CDATA[ onlineNum > #{onlineNum}  ]]>
			</if>
			<if test = "onlineNum != null and onlineNum &lt;  0">
				and <![CDATA[ onlineNum < -#{onlineNum}  ]]>
			</if>
			<if test = "openTime != null and openTime != ''">
				and openTime like  CONCAT('%',#{openTime},'%')
			</if>

			<if test = "openDays != null and openDays >= 0">
				and <![CDATA[ openDays > #{openDays}  ]]>
			</if>
			<if test = "openDays != null and openDays &lt;  0">
				and <![CDATA[ openDays < -#{openDays}  ]]>
			</if>
		</where>

	</select>

</mapper>